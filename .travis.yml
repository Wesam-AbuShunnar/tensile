sudo: false
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - oracle-java8-installer
      - pkg-config 
      - zip 
      - gcc-4.8
      - g++-4.8
      - zlib1g-dev 
      - unzip 
      - php5-dev 
      - python-numpy 
      - swig 
      - python-dev

language: cpp

cache: ccache

compiler:
  - gcc

env:
    - CXX=g++-4.8
    - CC=gcc-4.8
  global:
    - PATH=$HOME/output/bazel/:$PATH
    - TF_NEED_CUDA=0
    - VER_BAZEL=0.1.2
    - #CUDA_TOOLKIT_PATH=/usr/local/cuda-7.0
    - #CUDNN_INSTALL_PATH=/usr/local/cuda-6.5

before_install:
- wget https://github.com/bazelbuild/bazel/releases/download/${VER_BAZEL}/bazel-${VER_BAZEL}-jdk7-installer-linux-x86_64.sh
- chmod +x bazel-${VER_BAZEL}-jdk7-installer-linux-x86_64.sh
- ./bazel-${VER_BAZEL}-jdk7-installer-linux-x86_64.sh --user
- git submodule update --init --recursive
- mkdir lib/tensorflow/tensorflow/libtensorflow
- cp ${TRAVIS_BUILD_DIR}/BUILD  lib/tensorflow/tensorflow/libtensorflow/BUILD
- cd lib/tensorflow/tensorflow/libtensorflow
- bazel build --verbose_failures :libtensorflow.so

notifications:
    on_success: never
    on_failure: never

os:
  - linux

matrix:
  fast_finish: true
